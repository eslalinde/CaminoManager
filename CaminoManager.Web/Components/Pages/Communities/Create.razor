@page "/communities/create"
@using CaminoManager.Web
@using CaminoManager.ServiceDefaults.DTOs
@using CaminoManager.Web.Services
@inject CommunityService CommunityService
@inject NavigationManager NavigationManager

<MudText Typo="Typo.h3" Class="mb-4">Create Community</MudText>

<CommunityForm Community="_community"
               ButtonText="Create"
               OnValidSubmit="CreateCommunity"
               OnCancel="Cancel" />

@code {
    private CreateCommunityDto _community = new();

    private async Task CreateCommunity()
    {
        await CommunityService.CreateCommunityAsync(_community);
        NavigationManager.NavigateTo("/communities");
    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/communities");
    }
}